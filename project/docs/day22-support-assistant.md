# –î–µ–Ω—å 22: –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –û–ø–∏—Å–∞–Ω–∏–µ

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –∏—Å–ø–æ–ª—å–∑—É—è:
- **RAG** - –ø–æ–∏—Å–∫ –≤ FAQ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- **MCP** - –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º CRM (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ç–∏–∫–µ—Ç—ã)
- **AI** - YandexGPT –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Support Assistant                         ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ   User Question    ‚îÇ‚Üí ‚îÇ MCP: Get User ‚îÇ‚Üí ‚îÇ RAG: FAQ   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  + userId/ticketId ‚îÇ  ‚îÇ   & Tickets   ‚îÇ  ‚îÇ  Search    ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                ‚Üì                             ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ
‚îÇ                    ‚îÇ   YandexGPT Lite     ‚îÇ                 ‚îÇ
‚îÇ                    ‚îÇ  (temperature=0.5)   ‚îÇ                 ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ
‚îÇ                                ‚Üì                             ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ              ‚îÇ  Personalized Answer         ‚îÇ               ‚îÇ
‚îÇ              ‚îÇ  + Used Sources              ‚îÇ               ‚îÇ
‚îÇ              ‚îÇ  + Related Tickets           ‚îÇ               ‚îÇ
‚îÇ              ‚îÇ  + Confidence Score          ‚îÇ               ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. FAQ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–§–∞–π–ª**: `project/docs/faq.md`

–°–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ß–∞—Ç –∏ AI –º–æ–¥–µ–ª–∏
- RAG (Retrieval Augmented Generation)
- MCP (Model Context Protocol)
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- Code Review
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- –û—à–∏–±–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### 2. CRM Data
**–§–∞–π–ª**: `server/src/main/resources/support-data.json`

JSON —Ñ–∞–π–ª —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** (5 –∑–∞–ø–∏—Å–µ–π): id, name, email, plan, registeredAt, status, company
- **–¢–∏–∫–µ—Ç—ã** (10 –∑–∞–ø–∏—Å–µ–π): id, userId, subject, description, status, priority, category, history

–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–∏–∫–µ—Ç–æ–≤:
- `auth` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `ai` - AI –º–æ–¥–µ–ª–∏
- `rag` - RAG —Å–∏—Å—Ç–µ–º–∞
- `code_review` - code review
- `deployment` - —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- `general` - –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
- `ui` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `account` - –∞–∫–∫–∞—É–Ω—Ç
- `performance` - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 3. SupportToolsService
**–§–∞–π–ª**: `server/src/main/kotlin/com/aichallengekmp/tools/SupportToolsService.kt`

–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CRM –¥–∞–Ω–Ω—ã–º–∏. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç 5 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

#### get_user
–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø–æ ID.
```kotlin
supportTools.executeTool("get_user", mapOf("user_id" to "user001"))
```

#### get_user_tickets
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å—Ç–∞—Ç—É—Å—É.
```kotlin
supportTools.executeTool("get_user_tickets", mapOf(
    "user_id" to "user001",
    "status" to "open" // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
))
```

#### get_ticket_details
–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–∫–µ—Ç–µ –≤–∫–ª—é—á–∞—è –ø–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é.
```kotlin
supportTools.executeTool("get_ticket_details", mapOf(
    "ticket_id" to "ticket001"
))
```

#### search_tickets
–ü–æ–∏—Å–∫ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–ª–∏ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º.
```kotlin
supportTools.executeTool("search_tickets", mapOf(
    "category" to "auth", // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    "keyword" to "–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è" // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
))
```

#### get_similar_tickets
–ù–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏–µ —Ä–µ—à–µ–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é –ø—Ä–æ–±–ª–µ–º—ã.
```kotlin
supportTools.executeTool("get_similar_tickets", mapOf(
    "description" to "–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ GitHub"
))
```

### 4. Support MCP Server
**–§–∞–π–ª**: `server/src/main/kotlin/com/aichallengekmp/mcp/McpServerSetup.kt`
**Endpoint**: `/mcp/support`

MCP —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ 5 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ SupportToolsService —á–µ—Ä–µ–∑ SSE –ø—Ä–æ—Ç–æ–∫–æ–ª.

### 5. SupportAssistantService
**–§–∞–π–ª**: `server/src/main/kotlin/com/aichallengekmp/service/SupportAssistantService.kt`

–ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π MCP + RAG + AI.

**Workflow**:
1. –ü–æ–ª—É—á–∞–µ—Ç –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ userId –∏ ticketId
2. –ß–µ—Ä–µ–∑ MCP –ø–æ–ª—É—á–∞–µ—Ç:
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
   - –°–ø–∏—Å–æ–∫ –µ–≥–æ —Ç–∏–∫–µ—Ç–æ–≤
   - –î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–∫–µ—Ç–∞ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω ticketId)
   - –ü–æ—Ö–æ–∂–∏–µ —Ä–µ—à–µ–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã
3. –ß–µ—Ä–µ–∑ RAG –∏—â–µ—Ç:
   - –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –≤ FAQ (top-3)
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (top-2)
4. –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
5. –í—ã–∑—ã–≤–∞–µ—Ç YandexGPT Lite (temperature=0.5)
6. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç

**–û—Ç–≤–µ—Ç** —Å–æ–¥–µ—Ä–∂–∏—Ç:
```typescript
{
  answer: string,          // –û—Ç–≤–µ—Ç –æ—Ç AI
  usedSources: string[],   // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (FAQ/docs)
  relatedTickets: string[], // –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã
  userContext: string?,    // –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  confidence: double       // –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –æ—Ç–≤–µ—Ç–µ (0.0-1.0)
}
```

**Confidence Score**:
- +0.3 - –µ—Å—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ FAQ
- +0.2 - –ø–µ—Ä–≤—ã–π FAQ —á–∞–Ω–∫ –∏–º–µ–µ—Ç –≤—ã—Å–æ–∫—É—é —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (>0.7)
- +0.5 - –Ω–∞–π–¥–µ–Ω—ã –ø–æ—Ö–æ–∂–∏–µ —Ä–µ—à–µ–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã

### 6. API Endpoints
**–§–∞–π–ª**: `server/src/main/kotlin/com/aichallengekmp/routing/SupportRoutes.kt`

#### POST /api/support/ask
–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

**Request:**
```json
{
  "question": "–ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è?",
  "userId": "user001",    // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "ticketId": "ticket001" // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**Response:**
```json
{
  "answer": "–ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:\n\n1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ...",
  "usedSources": ["project/docs/faq.md"],
  "relatedTickets": ["ticket001", "ticket002"],
  "userContext": "{\"id\":\"user001\",\"name\":\"–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤\",...}",
  "confidence": 0.8
}
```

#### GET /api/support/user/{userId}
–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.

#### GET /api/support/user/{userId}/tickets?status=open
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.

#### GET /api/support/ticket/{ticketId}
–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ —Ç–∏–∫–µ—Ç–∞.

#### POST /api/support/tickets/search
–ü–æ–∏—Å–∫ —Ç–∏–∫–µ—Ç–æ–≤.

**Request:**
```json
{
  "category": "auth",    // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "keyword": "—Ç–æ–∫–µ–Ω"     // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è FAQ
–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä—É–π—Ç–µ FAQ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:
```bash
curl -X POST http://localhost:8080/api/rag/index/docs
```

–≠—Ç–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –≤—Å–µ .md —Ñ–∞–π–ª—ã –∏–∑ `project/docs/`, –≤–∫–ª—é—á–∞—è `faq.md`.

### 2. –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**–ü—Ä–æ—Å—Ç–æ–π –≤–æ–ø—Ä–æ—Å –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**
```bash
curl -X POST http://localhost:8080/api/support/ask \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–ö–∞–∫–∏–µ AI –º–æ–¥–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã?"
  }'
```

**–í–æ–ø—Ä–æ—Å —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```bash
curl -X POST http://localhost:8080/api/support/ask \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è?",
    "userId": "user001"
  }'
```

**–í–æ–ø—Ä–æ—Å —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Ç–∏–∫–µ—Ç–∞:**
```bash
curl -X POST http://localhost:8080/api/support/ask \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–ï—Å—Ç—å –ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ –º–æ–µ–π –ø—Ä–æ–±–ª–µ–º–µ?",
    "userId": "user001",
    "ticketId": "ticket001"
  }'
```

**–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:**
```bash
curl http://localhost:8080/api/support/user/user001
```

**–ü–æ–ª—É—á–∏—Ç—å —Ç–∏–∫–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```bash
curl "http://localhost:8080/api/support/user/user001/tickets?status=open"
```

**–ü–æ–∏—Å–∫ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
```bash
curl -X POST http://localhost:8080/api/support/tickets/search \
  -H "Content-Type: application/json" \
  -d '{
    "category": "auth",
    "keyword": "GitHub"
  }'
```

## MCP Server

Support MCP Server –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `/mcp/support` —á–µ—Ä–µ–∑ SSE –ø—Ä–æ—Ç–æ–∫–æ–ª.

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è MCP –∫–ª–∏–µ–Ω—Ç–∞:**
```typescript
const client = new MCPClient("http://localhost:8080/mcp/support");

// –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
const user = await client.callTool("get_user", {
  user_id: "user001"
});

// –ù–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏–µ —Ç–∏–∫–µ—Ç—ã
const similar = await client.callTool("get_similar_tickets", {
  description: "–ø—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ GitHub"
});
```

## –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

### –ü—Ä–∏–º–µ—Ä 1: –û–±—â–∏–π –≤–æ–ø—Ä–æ—Å
**–í–æ–ø—Ä–æ—Å**: "–ö–∞–∫ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é?"

**–û—Ç–≤–µ—Ç**:
```
–î–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –≤–∞—à–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ API endpoint:

curl -X POST http://localhost:8080/api/rag/index/docs

–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –≤—Å–µ .md —Ñ–∞–π–ª—ã –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ project/docs.

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
1. Ollama –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 11434
2. –ú–æ–¥–µ–ª—å nomic-embed-text –∑–∞–≥—Ä—É–∂–µ–Ω–∞: ollama pull nomic-embed-text

–ü–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –≤ —á–∞—Ç–µ, –∏ AI –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞—à—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤.
```

### –ü—Ä–∏–º–µ—Ä 2: –í–æ–ø—Ä–æ—Å —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
**–í–æ–ø—Ä–æ—Å**: "–ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è?" (userId: user001)

**–ö–æ–Ω—Ç–µ–∫—Å—Ç**:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤ (premium –ø–ª–∞–Ω)
- –û—Ç–∫—Ä—ã—Ç—ã–π —Ç–∏–∫–µ—Ç: #ticket001 "–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ GitHub"

**–û—Ç–≤–µ—Ç**:
```
–ò–≤–∞–Ω, –≤–∏–∂—É —á—Ç–æ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–π —Ç–∏–∫–µ—Ç #ticket001 –ø–æ —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º–µ.

–ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ GitHub –æ–±—ã—á–Ω–æ —Å–≤—è–∑–∞–Ω—ã —Å:

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π GITHUB_TOKEN** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. **–ò—Å—Ç–µ–∫ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞** - —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Personal Access Token –Ω–∞ GitHub
3. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è** - —Ç–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å scope 'repo'

–ü–æ—Ö–æ–∂–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —É–∂–µ —Ä–µ—à–∞–ª–∞—Å—å –≤ —Ç–∏–∫–µ—Ç–µ #ticket002. –†–µ—à–µ–Ω–∏–µ:
- –û–±–Ω–æ–≤–∏—Ç–µ GITHUB_TOKEN –≤ Run Configuration –≤–∞—à–µ–π IDE
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–∫–∏ –≤ –≤–∞—à–µ–º —Ç–∏–∫–µ—Ç–µ.
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ AppModule

–í `AppModule.kt` –¥–æ–±–∞–≤–ª–µ–Ω—ã:

```kotlin
val supportTools by lazy {
    SupportToolsService(
        dataFilePath = "server/src/main/resources/support-data.json"
    )
}

val supportAssistantService by lazy {
    SupportAssistantService(
        supportTools = supportTools,
        ragSearchService = ragSearchService,
        modelRegistry = modelRegistry
    )
}
```

–í `Application.kt` –¥–æ–±–∞–≤–ª–µ–Ω—ã:

```kotlin
// MCP Server
configureSupportMcpServer(
    supportTools = AppContainer.supportTools
)

// API Routes
route("/api") {
    supportRoutes()
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω:
```bash
ollama list  # –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –º–æ–¥–µ–ª—å nomic-embed-text
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
YANDEX_API_KEY=your_key
YANDEX_MODEL_URI=your_folder_id
```

3. –ü—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä—É–π—Ç–µ FAQ:
```bash
curl -X POST http://localhost:8080/api/rag/index/docs
```

4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å:
```bash
curl -X POST http://localhost:8080/api/support/ask \
  -H "Content-Type: application/json" \
  -d '{"question": "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RAG?"}'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ MCP Server

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å MCP endpoint
curl http://localhost:8080/mcp/support
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω–æ–π CRM**:
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—å Zendesk / Jira / GitHub Issues API
   - –û–±–Ω–æ–≤–ª—è—Ç—å —Ç–∏–∫–µ—Ç—ã —á–µ—Ä–µ–∑ MCP tools

2. **–£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞**:
   - –î–æ–±–∞–≤–∏—Ç—å semantic search –¥–ª—è —Ç–∏–∫–µ—Ç–æ–≤
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TF-IDF –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**:
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å confidence score
   - A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
   - –ú–µ—Ç—Ä–∏–∫–∏: —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤, escalation rate

4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**:
   - Auto-reply –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π FAQ

5. **Multi-language support**:
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
   - –û—Ç–≤–µ—Ç—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö

## –ò—Ç–æ–≥–∏

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

‚úÖ **RAG** - –ø–æ–∏—Å–∫ –≤ FAQ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
‚úÖ **MCP** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM –¥–∞–Ω–Ω—ã–º–∏
‚úÖ **AI** - YandexGPT –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
‚úÖ **API** - REST endpoints –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚úÖ **MCP Server** - `/mcp/support` –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
‚úÖ **Confidence Score** - –æ—Ü–µ–Ω–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –æ—Ç–≤–µ—Ç–µ
‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - —É—á–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Ç–∏–∫–µ—Ç–æ–≤
‚úÖ **–ü–æ—Ö–æ–∂–∏–µ –ø—Ä–æ–±–ª–µ–º—ã** - —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ—à–µ–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ CRM —Å–∏—Å—Ç–µ–º–∞–º–∏! üéâ
